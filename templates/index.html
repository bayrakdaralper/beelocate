<!DOCTYPE html>
<html class="dark" lang="en">
<head>
   <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RB3NKEXE1Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-RB3NKEXE1Y');
</script>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>BeeLocate PRO v3.9</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://unpkg.com/tippy.js@6"></script>

<script>
    tailwind.config = { darkMode: "class", theme: { extend: { colors: { "primary": "#FFC107", "primary-hover": "#FFB300", "bg-dark": "#212121", "surface": "#1a1a1a" }, fontFamily: { "display": ["Inter", "sans-serif"] } } } }
</script>
<style>
    body { overscroll-behavior-y: none; position: fixed; width: 100%; height: 100%; overflow: hidden; }
    #map { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }
    .radar-spinner { width: 80px; height: 80px; border-radius: 50%; background: conic-gradient(from 0deg, transparent 0%, rgba(255, 193, 7, 0.5) 100%); animation: radar-spin 1.5s linear infinite; position: relative; }
    .radar-spinner::before { content: ''; position: absolute; inset: 4px; border-radius: 50%; background: #212121; }
    @keyframes radar-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
    input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #FFC107; margin-top: -6px; cursor: pointer; }
    input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #444; border-radius: 2px; }
    .animate-fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slideUp 0.3s ease-out forwards; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    .tippy-box[data-theme~='custom'] { background-color: #333; color: white; font-size: 11px; text-align: center; border: 1px solid #444; }
</style>
</head>
<body class="bg-bg-dark text-white font-display">

    <div class="fixed top-6 left-1/2 -translate-x-1/2 w-11/12 md:w-[600px] z-20 flex flex-col gap-3 pointer-events-none">
        <div class="flex justify-between items-center px-2 pointer-events-auto">
            <a href="/" class="flex items-center gap-2 drop-shadow-md bg-black/60 px-4 py-2 rounded-full backdrop-blur cursor-pointer border border-white/10 hover:bg-black/80 transition group">
                <span class="material-symbols-outlined text-primary text-3xl group-hover:scale-110 transition">hive</span>
                <h1 class="text-xl font-bold tracking-tight">BeeLocate <span class="text-primary">PRO</span></h1>
            </a>
            <div class="flex items-center gap-2">
              <a href="mailto:info@beelocatepro.com?subject=BeeLocate%20PRO%20-%20Ä°letiÅŸim" 
   class="bg-black/60 backdrop-blur-md rounded-full w-9 h-9 flex items-center justify-center border border-white/10 shadow-lg hover:bg-primary hover:text-black hover:border-primary transition text-gray-300 group" 
   data-tippy-content="Bize UlaÅŸÄ±n / Contact Us">
                    <span class="material-symbols-outlined text-xl group-active:scale-90 transition">mail</span>
                </a>

                <div class="bg-black/60 backdrop-blur-md rounded-full px-1 py-1 border border-white/10 flex shadow-lg h-9 items-center">
                    <button onclick="setLang('TR')" id="btn-tr" class="px-3 py-1 rounded-full text-xs font-bold bg-primary text-black transition">TR</button>
                    <button onclick="setLang('EN')" id="btn-en" class="px-3 py-1 rounded-full text-xs font-bold text-gray-400 transition hover:text-white">EN</button>
                </div>
            </div>
        </div>
    </div>

    <div id="map"></div>

    <div class="fixed bottom-8 left-1/2 -translate-x-1/2 z-20 flex flex-col items-center gap-3 w-[95%] max-w-sm px-0" id="analyze-container">
        <div class="bg-black/80 backdrop-blur-md p-4 rounded-2xl border border-white/10 w-full animate-fade-in-up space-y-4 shadow-2xl">
            <div class="flex items-center bg-white/10 rounded-xl px-3 h-10 border border-white/5 focus-within:border-primary transition">
                <span class="material-symbols-outlined text-gray-400 text-lg">search</span>
                <input id="search-input" class="bg-transparent border-none text-white text-sm w-full ml-2 focus:outline-none placeholder-gray-500" 
                       placeholder="Konum ara... (Ã–rn: SarÄ±cakaya)" onkeypress="handleSearch(event)">
            </div>
            <div>
                <div class="flex justify-between text-[10px] text-gray-400 mb-2 font-bold uppercase tracking-wider">
                    <span id="lbl-rad">Tarama Ã‡apÄ± (Buffer)</span>
                    <span class="text-primary" id="rad-val">2000m</span>
                </div>
                <input type="range" id="radius-slider" min="1000" max="5000" step="500" value="2000" oninput="updateRadius(this.value)">
            </div>
        </div>
        <button onclick="runSmartAnalysis()" class="flex items-center justify-center gap-3 h-14 w-full bg-primary hover:bg-primary-hover text-[#181610] rounded-2xl shadow-xl transform transition active:scale-95 animate-fade-in-up font-bold text-lg" style="animation-delay: 0.1s;">
            <span class="material-symbols-outlined text-2xl">query_stats</span>
            <span id="btn-analyze-text">ANALÄ°ZÄ° BAÅžLAT</span>
        </button>
    </div>

    <div id="loading-screen" class="fixed inset-0 bg-bg-dark/95 z-50 hidden flex-col items-center justify-center text-center">
        <div class="radar-spinner mb-4"></div>
        <div class="text-4xl font-black text-primary mb-2" id="loading-percent">0%</div>
        <h2 class="text-xl font-bold mb-4 text-white" id="loading-title">CBS Verileri Ä°ÅŸleniyor...</h2>
        <div class="w-80 h-24 overflow-hidden relative">
            <div id="log-container" class="flex flex-col items-center gap-2 text-sm text-gray-400 font-mono transition-all duration-300"></div>
            <div class="absolute bottom-0 w-full h-10 bg-gradient-to-t from-bg-dark to-transparent"></div>
        </div>
        <p class="text-xs text-gray-500 mt-8 absolute bottom-10 px-4">Sunucu "Cold Start" modunda olabilir. Ä°lk iÅŸlem 40-50sn sÃ¼rebilir.</p>
    </div>

    <div id="result-modal" class="fixed inset-0 z-40 hidden flex items-end md:items-center justify-center bg-black/60 backdrop-blur-sm" onclick="closeModal(event)">
        <div id="modal-content" class="bg-[#1e1e1e] w-full md:w-full md:max-w-6xl md:rounded-3xl rounded-t-3xl border-t md:border border-white/10 shadow-2xl h-[85vh] md:h-[750px] relative slide-up overflow-hidden" onclick="event.stopPropagation()">
            
            <button onclick="closeModalBtn()" class="absolute top-4 right-4 z-[70] bg-white/10 hover:bg-red-500 hover:text-white text-white rounded-full p-2 transition shadow-lg backdrop-blur-md">
                <span class="material-symbols-outlined text-2xl">close</span>
            </button>

            <div id="sticky-mini-header" class="absolute top-0 left-0 w-full h-20 bg-[#1e1e1e] border-b border-white/10 z-[60] flex items-center justify-between px-6 opacity-0 pointer-events-none transition-opacity duration-300 rounded-t-3xl">
                <div class="flex items-center gap-3">
                    <span class="text-3xl font-black text-primary" id="mini-score-val">0</span>
                    <div class="flex flex-col">
                        <span class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">SKOR</span>
                        <span class="text-xs font-bold text-green-400" id="mini-score-comment">--</span>
                    </div>
                </div>
            </div>

            <div id="main-scroll-container" class="h-full overflow-y-auto no-scrollbar" onscroll="handleScroll(this)">
                <div class="flex flex-col md:flex-row min-h-full">
                    
                    <div class="w-full md:w-1/3 bg-[#252525] flex flex-col border-b md:border-b-0 md:border-r border-white/5 relative">
                        <div class="p-8 flex flex-col h-full">
                            <div class="text-center md:text-left">
                                <div class="inline-flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5 mb-4">
                                    <span class="size-2 rounded-full bg-green-500 animate-pulse"></span>
                                    <span class="text-xs font-bold text-gray-300" id="lbl-live">CBS ANALÄ°ZÄ°</span>
                                </div>
                                <div class="text-gray-400 text-sm font-bold uppercase tracking-widest mb-1" id="lbl-score">UYGUNLUK SKORU</div>
                                <div class="flex items-baseline justify-center md:justify-start gap-2">
                                    <span class="text-8xl font-black text-primary" id="score-val">0</span>
                                    <span class="text-2xl text-gray-500 font-bold">/100</span>
                                </div>
                                <div class="mt-2 text-green-400 font-bold text-xl flex items-center justify-center md:justify-start gap-2">
                                    <span class="material-symbols-outlined">trending_up</span>
                                    <span id="score-comment">--</span>
                                </div>
                            </div>
                            <div class="mt-6 p-4 bg-black/20 rounded-xl border-l-2 border-primary text-center md:text-left">
                                <p class="text-sm text-gray-300 leading-relaxed" id="dynamic-text">...</p>
                            </div>
                            <div class="hidden md:block mt-auto pt-6 opacity-30 text-[10px] uppercase tracking-widest text-center">BeeLocate - GIS Decision Support System</div>
                        </div>
                    </div>

                    <div class="w-full md:w-2/3 p-4 md:p-8 bg-[#1e1e1e]">
                        <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-3 sticky top-0 md:static z-10 py-2">
                            <h3 class="text-xl md:text-2xl font-bold text-white text-center md:text-left" id="lbl-details">Arazi Parametreleri</h3>
                            
                            <div class="flex gap-2 w-full">
                                <button onclick="downloadReport()" class="flex-1 bg-primary hover:bg-primary-hover text-black px-3 py-3 rounded-xl text-sm font-bold transition flex items-center justify-center gap-2 shadow-lg transform active:scale-95">
                                    <span class="material-symbols-outlined">download</span> <span id="btn-dl">Rapor (PDF)</span>
                                </button>
                                <button onclick="shareResult()" class="flex-1 bg-primary hover:bg-primary-hover text-black px-3 py-3 rounded-xl text-sm font-bold transition flex items-center justify-center gap-2 shadow-lg transform active:scale-95">
                                    <span class="material-symbols-outlined">forward_to_inbox</span> <span id="btn-share">PaylaÅŸ (Mail)</span>
                                </button>
                            </div>

                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4 pb-24" id="metrics-grid"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const T = { 'TR': { ph:'Konum ara...', btn:'ANALÄ°ZÄ° BAÅžLAT', load:'CBS Verileri Ä°ÅŸleniyor...', logs:['OSM VektÃ¶r Verisi...','LULC Analizi...','Hidrografik Ã–lÃ§Ã¼m...','Mikroklima...'], live:'CBS ANALÄ°ZÄ°', score:'UYGUNLUK SKORU', dl:'RAPOR (PDF)', share:'PAYLAÅž (MAIL)', rad:'Tarama Ã‡apÄ±', det:'Arazi Parametreleri', high:'YÃ¼ksek Potansiyel', risk:'KÄ±sÄ±tlÄ± Alan', not_found:'Veri Yok', access_err:'EriÅŸim KÄ±sÄ±tlÄ±', lbl: {flora:'VEJETASYON', water:'HÄ°DROGRAFÄ°', wind:'RÃœZGAR HIZI', aspect:'BAKI ANALÄ°ZÄ°', hum:'NEM', slope:'EÄžÄ°M', road:'ULAÅžIM AÄžI', build:'ANTROPOJENÄ°K BASKI', elev:'RAKIM (DEM)', temp:'SICAKLIK'} }, 'EN': { ph:'Search location...', btn:'START ANALYSIS', load:'Processing GIS Data...', logs:['Fetching Vectors...','LULC Analysis...','Hydro Calculation...','Microclimate...'], live:'GIS ANALYSIS', score:'SUITABILITY SCORE', dl:'REPORT (PDF)', share:'SHARE (MAIL)', rad:'Scan Radius', det:'Terrain Parameters', high:'High Potential', risk:'Restricted Area', not_found:'No Data', access_err:'Restricted', lbl: {flora:'VEGETATION', water:'HYDROGRAPHY', wind:'WIND SPEED', aspect:'ASPECT', hum:'HUMIDITY', slope:'SLOPE', road:'TRANSPORT NETWORK', build:'ANTHROPOGENIC PRESSURE', elev:'ELEVATION (DEM)', temp:'TEMP'} } };
        const TOOLTIPS = { 'TR': { 'flora': 'Flora yoÄŸunluÄŸu ve nektar potansiyeli.', 'water': 'En yakÄ±n su kaynaÄŸÄ±na mesafe.', 'wind': 'BÃ¶lgesel rÃ¼zgar hÄ±zÄ±.', 'aspect': 'GÃ¼neÅŸlenme durumu.', 'hum': 'BaÄŸÄ±l nem oranÄ±.', 'slope': 'Arazi eÄŸimi.', 'road': 'Yola yakÄ±nlÄ±k.', 'build': 'YerleÅŸim yoÄŸunluÄŸu.', 'elev': 'RakÄ±m.', 'temp': 'Ortalama sÄ±caklÄ±k.' }, 'EN': { 'flora': 'Nectar potential.', 'water': 'Distance to water.', 'wind': 'Wind speed.', 'aspect': 'Sun orientation.', 'hum': 'Humidity.', 'slope': 'Terrain slope.', 'road': 'Road access.', 'build': 'Settlement density.', 'elev': 'Elevation.', 'temp': 'Avg temp.' } };
        
        let lang = 'TR'; let sLat, sLng, radius = 2000; let currentData = null; let map, marker, circle, heatLayerGroup; let progressInterval;

        function initMap() {
            map = L.map('map', { zoomControl: false }).setView([39.8105, 30.5050], 12); 
            var sat = L.tileLayer('https://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}', {attribution:'Google Satellite | BeeLocate'});
            sat.addTo(map); L.control.zoom({position:'bottomright'}).addTo(map); heatLayerGroup = L.layerGroup().addTo(map);
            map.on('click', function(e) { updateLocation(e.latlng.lat, e.latlng.lng); });
        }

        function setLang(l) {
            lang = l;
            const btnTr = document.getElementById('btn-tr'); const btnEn = document.getElementById('btn-en');
            if (l === 'TR') { btnTr.className = "px-3 py-1 rounded-full text-xs font-bold bg-primary text-black transition"; btnEn.className = "px-3 py-1 rounded-full text-xs font-bold text-gray-400 transition hover:text-white"; } 
            else { btnEn.className = "px-3 py-1 rounded-full text-xs font-bold bg-primary text-black transition"; btnTr.className = "px-3 py-1 rounded-full text-xs font-bold text-gray-400 transition hover:text-white"; }
            document.getElementById('search-input').placeholder = T[lang].ph; document.getElementById('btn-analyze-text').innerText = T[lang].btn; document.getElementById('lbl-rad').innerText = T[lang].rad;
        }

        function updateLocation(lat, lng) {
            if(marker) map.removeLayer(marker); heatLayerGroup.clearLayers();
            sLat = lat; sLng = lng; marker = L.marker([lat, lng]).addTo(map); updateCircle();
        }

        async function handleSearch(e) {
            if (e.key === 'Enter') {
                const query = document.getElementById('search-input').value; if (!query) return; document.getElementById('search-input').blur();
                try { const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}`); const data = await res.json();
                    if (data && data.length > 0) { const lat = parseFloat(data[0].lat); const lon = parseFloat(data[0].lon); map.setView([lat, lon], 13); updateLocation(lat, lon); } else { alert("Konum bulunamadÄ±."); }
                } catch (err) { console.error(err); }
            }
        }

        function updateRadius(val) { radius = val; document.getElementById('rad-val').innerText = val + "m"; updateCircle(); }
        function updateCircle() { if(circle) map.removeLayer(circle); if(sLat) circle = L.circle([sLat, sLng], {color:'#FFC107', fillColor:'#FFC107', fillOpacity:0.1, radius: radius}).addTo(map); }

        function startProgress() {
            let percent = 0; const el = document.getElementById('loading-percent'); const logBox = document.getElementById('log-container'); logBox.innerHTML = ''; const logs = T[lang].logs; let logIndex = 0;
            progressInterval = setInterval(() => { let increment = percent < 90 ? Math.random() * 5 : 0.5; percent += increment; if(percent>99) percent=99; el.innerText = Math.floor(percent) + "%"; if (percent > (logIndex + 1) * 20 && logIndex < logs.length) { let p = document.createElement('p'); p.innerText = logs[logIndex]; p.style.color = '#4ade80'; logBox.prepend(p); logIndex++; } }, 100);
        }
        function stopProgress() { clearInterval(progressInterval); document.getElementById('loading-percent').innerText = "100%"; }

        async function runSmartAnalysis() {
            if(!sLat || !sLng) { alert("LÃ¼tfen haritadan bir nokta seÃ§in."); return; }
            document.getElementById('loading-screen').style.display = 'flex'; startProgress();
            try {
                const res = await fetch('/analyze', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ lat: sLat, lng: sLng, radius: radius, lang: lang }) });
                const data = await res.json(); stopProgress(); await new Promise(r => setTimeout(r, 500)); document.getElementById('loading-screen').style.display = 'none';
                if (data.error) { alert("Hata: " + data.error); return; }
                currentData = data; document.getElementById('result-modal').style.display = 'flex'; updateUI(); drawHeatmap(data.heatmap);
            } catch (e) { stopProgress(); alert("Hata: " + e); document.getElementById('loading-screen').style.display = 'none'; }
        }

        function drawHeatmap(points) { points.forEach(p => { let col = p.val > 70 ? '#2ecc71' : (p.val > 40 ? '#f1c40f' : '#e74c3c'); L.circle([p.lat, p.lng], { color: col, fillColor: col, fillOpacity: 0.4, radius: radius/5, stroke: false }).addTo(heatLayerGroup); }); }

        function updateUI() {
            if (!currentData || !currentData.details) return;
            const d = currentData.details; const s = currentData.breakdown; const L = T[lang]; const Tooltips = TOOLTIPS[lang];
            
            document.getElementById('score-val').innerText = currentData.score; document.getElementById('score-comment').innerText = currentData.score > 70 ? L.high : L.risk; document.getElementById('dynamic-text').innerHTML = currentData.ai_text;
            document.getElementById('mini-score-val').innerText = currentData.score; document.getElementById('mini-score-comment').innerText = currentData.score > 70 ? L.high : L.risk;
            document.getElementById('lbl-details').innerText = L.det; document.getElementById('btn-dl').innerText = L.dl;
            document.getElementById('btn-share').innerText = L.share;

            const waterText = d.d_water >= 9000 ? L.not_found : d.d_water + "m"; const roadText = d.d_road >= 5000 ? L.access_err : d.d_road + "m";
            const metrics = [ { id: 'flora', l: L.lbl.flora, v: d.flora_type, s: s.flora, i: "forest" }, { id: 'water', l: L.lbl.water, v: waterText, s: s.water, i: "water_drop" }, { id: 'wind', l: L.lbl.wind, v: `${d.avg_wind} km/h`, s: s.wind, i: "air" }, { id: 'aspect', l: L.lbl.aspect, v: d.dir_tr, s: s.aspect, i: "wb_sunny" }, { id: 'hum', l: L.lbl.hum, v: "%" + d.avg_hum, s: 50, i: "humidity_percentage" }, { id: 'slope', l: L.lbl.slope, v: "%" + parseInt(d.s_val), s: s.slope, i: "landscape" }, { id: 'road', l: L.lbl.road, v: roadText, s: s.road, i: "add_road" }, { id: 'build', l: L.lbl.build, v: d.b_count, s: s.build, i: "location_city" }, { id: 'elev', l: L.lbl.elev, v: d.elevation + "m", s: 100, i: "landscape" }, { id: 'temp', l: L.lbl.temp, v: d.avg_temp + " Â°C", s: s.temp, i: "thermostat" } ];

            const grid = document.getElementById('metrics-grid'); grid.innerHTML = '';
            metrics.forEach(m => { const barColor = m.s > 70 ? "bg-green-500" : (m.s > 40 ? "bg-yellow-500" : "bg-red-500"); const infoText = Tooltips[m.id] || "";
                grid.innerHTML += `<div class="bg-white/5 p-4 rounded-xl border border-white/5 flex flex-col justify-between relative group hover:border-primary/50 transition"><span class="material-symbols-outlined absolute top-2 right-2 text-gray-500 text-sm cursor-help hover:text-white transition" data-tippy-content="${infoText}" data-theme="custom">info</span><div class="flex justify-between items-start mb-2"><div><div class="text-[10px] text-gray-400 font-bold uppercase tracking-wider mb-1">${m.l}</div><div class="text-white font-bold text-lg leading-tight truncate w-32 md:w-40">${m.v}</div></div><span class="material-symbols-outlined text-gray-600 text-2xl">${m.i}</span></div><div class="w-full h-1.5 bg-gray-700 mt-2 rounded-full overflow-hidden"><div class="h-full ${barColor}" style="width: ${m.s}%"></div></div></div>`;
            });
            tippy('[data-tippy-content]', { theme: 'custom', placement: 'bottom', animation: 'scale' });
        }

     function shareResult() {
            if(!currentData) return;
            const d = currentData.details;
            
            const subject = `BeeLocate Analiz Raporu: ${currentData.score} Puan`;
            
            // DÃœZELTÄ°LEN KISIM: Standart Google Maps Link YapÄ±sÄ±
            // ArtÄ±k sÃ¼slÃ¼ parantez hatasÄ± veya yÃ¶nlendirme sorunu yok.
            const mapsLink = `https://www.google.com/maps?q=${sLat},${sLng}`;

            const bodyText = `MERHABA,
BeeLocate PRO ile yaptÄ±ÄŸÄ±m yer seÃ§imi analizi sonuÃ§larÄ± aÅŸaÄŸÄ±dadÄ±r:

ðŸ“ KONUM BÄ°LGÄ°SÄ°
---------------------
Koordinat: ${sLat.toFixed(5)}, ${sLng.toFixed(5)}
Haritada GÃ¶r: ${mapsLink}

ðŸ“Š ANALÄ°Z Ã–ZETÄ°
---------------------
ðŸ† Skor: ${currentData.score}/100
ðŸŒ² Flora Tipi: ${d.flora_type}
ðŸ’§ Suya Mesafe: ${d.d_water}m
ðŸ’¨ RÃ¼zgar: ${d.avg_wind} km/h (${d.wind_dir})
â˜€ï¸ BakÄ±: ${d.dir_tr}
â›°ï¸ RakÄ±m: ${d.elevation}m

BeeLocate PRO - CBS Destekli ArÄ±cÄ±lÄ±k Karar Destek Sistemi
www.beelocatepro.com
            `;
            
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(bodyText)}`;
        }

        function handleScroll(el) { if (window.innerWidth >= 768) return; const miniHeader = document.getElementById('sticky-mini-header'); if (el.scrollTop > 150) { miniHeader.classList.remove('opacity-0', 'pointer-events-none'); miniHeader.classList.add('opacity-100', 'pointer-events-auto'); } else { miniHeader.classList.add('opacity-0', 'pointer-events-none'); miniHeader.classList.remove('opacity-100', 'pointer-events-auto'); } }
        function closeModal(e) { if(e.target.id === 'result-modal') document.getElementById('result-modal').style.display='none'; }
        function closeModalBtn() { document.getElementById('result-modal').style.display='none'; }
        function downloadReport() { window.open(`/download_report?lat=${sLat}&lng=${sLng}&radius=${radius}&lang=${lang}`, '_blank'); }
        initMap();
        
        // STATIC ELEMENTS TOOLTIP INITIALIZATION
        tippy('[data-tippy-content]', { theme: 'custom', placement: 'bottom', animation: 'scale' });
    </script>
</body>
</html>
